<?xml version="1.0" encoding="UTF-8" ?>
<Module>
  <ModulePrefs title="Module to show information of application"
    height="100">
    <Require feature="dynamic-height"/>
  </ModulePrefs>
  <Content type="html">
  <![CDATA[
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
  <script>
    function init(){
        var urlApp = (window.location != window.parent.location)
                ? document.referrer
                : document.location.href;
        urlApp = urlApp.split("/");
        urlApp = urlApp[urlApp.length - 1];

        var url = "https://spreadsheets.google.com/feeds/list/1wsybm0u3HvELqq0c7gjYWXmJUnJVm3W45q3G-eoX8bs/3/public/basic?alt=json&sq=applicationname=" + urlApp;
        $.ajax({
            url:url,
            async: false,
            dataType:"jsonp",
            success:function(data) {
                createObj(data.feed.entry);
            },
        });

        var arrayToShow = [];

        function createObj(dataEntry){
            dataEntry.forEach(function(response){
                var returnObj = {};
                response = response['content']['$t'].split(", ");

                response.forEach(function(el){
                    var elArry = el.split(": ");
                    returnObj[elArry[0]] = elArry[1];
                });
                
                arrayToShow.push(returnObj);
            })
            console.log(arrayToShow);
        };  
        gadgets.window.adjustHeight();
    }
  window.addEventListener('DOMContentLoaded', init)
</script>
<style>
    .information__wrapper{
        height: 525px;
        box-shadow: 0 1px 6px rgba(0, 0, 0, 0.15);
        border-radius: 6px;
        background-color: #ffffff;
        width: calc(100% - 12px);
        margin: 0 auto;
        margin-top: 2px;
    }
    .simple__information{
        padding-top: 52px;
        box-sizing: border-box;
    }
    .simple__information_name{
        color: #3e78bd;
        font-family: Arial;
        font-size: 30px;
        font-weight: 500;
        letter-spacing: 0.6px;
        margin: 0;
    }
    .simple__information_description{
        color: #000000;
        font-family: Arial;
        font-size: 20px;
        font-weight: 300;
        letter-spacing: 0.4px;
        margin: 0;
    }
</style>
<div class="information__wrapper">
    <div class="simple__information">
        <h2 class="simple__information_name">Smartsheet Enterprise</h2>
        <p class="simple__information_description">Best online collaboration for project planning</p>
    </div>
    <div class="details__information">
        <div class="details__information_col">
            <div class="details__information_box">
                <p class="details__information_box_title">Crucial Functions</p>
                <div class="details__information_box_inner">
                    <ul class="details__information_box_list">
                        <li>Create task list</li>
                        <li>Sub-task hierarchy (collapse/expand)</li>
                        <li>Task dependencies</li>
                        <li>Gantt & Calendar view</li>
                        <li>Custom reports across projects</li>
                        <li>Import & Export MS Project Files</li>
                        <li>Cross-Project Resource Views</li>
                        <li>Cross-Project Summary Views</li>
                        <li>Share online</li>
                        <li>Change Notifications</li>
                        <li>File attachment on any task</li>
                        <li>Discussions on any task</li>
                        <li>Create custom fields</li>
                        <li>Templates for Operations, IT, Marketing, HR</li>
                        <li>Conditional Formatting</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="details__information_col">
            <div class="details__information_box">
                <p class="details__information_box_title">Cost</p>
                <div class="details__information_box_inner">
                    <p>$115 per user per year</p>
                </div>
            </div>
            <div class="details__information_box">
                <p class="details__information_box_title">Delivery time</p>
                <div class="details__information_box_inner">
                    <p>up to 5 days</p>
                </div>
            </div>
            <div class="details__information_box">
                <p class="details__information_box_title">Mobile app availability</p>
                <div class="details__information_box_inner">
                    <p>Native Android & iOS Apps</p>
                </div>
            </div>
        </div>
        <div class="details__information_col">
            <div class="details__information_box">
                <p class="details__information_box_title">Approval policy</p>
                <div class="details__information_box_inner">
                    <p>Manager's approval required</p>
                </div>
            </div>
            <div class="details__information_box">
                <p class="details__information_box_title">Device compatibility</p>
                <div class="details__information_box_inner">
                    <p>up to 5 days</p>
                </div>
            </div>
        </div>
    </div>
    <button type="button" onclick="showAllCapability()" class="more_capability"><span class="arrowMore"></span><span class="textButton">Show more applications</span></button>
</div>
  ]]>
  </Content>
</Module>